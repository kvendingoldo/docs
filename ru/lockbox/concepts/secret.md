---
title: Что такое секреты в {{ lockbox-full-name }}
description: Из статьи вы узнаете, что такое секреты в {{ lockbox-full-name }} и из чего они состоят.
---

# Секреты в {{ lockbox-full-name }}

## Секрет {#secret}

Секрет состоит из набора версий, в которых хранятся данные, такие как ключи API, пароли или токены. Версия содержит наборы ключей и значений. Ключ — это несекретное название для значения, по которому вы будете его идентифицировать. Значение — это секретные данные.

К секретам можно настраивать доступ, используя сервис [{{ iam-full-name }}](../../iam/index.yaml). Доступные роли для разных сценариев использования описаны в разделе [{#T}](../security/index.md).

Секрет может находиться в активном и деактивированном состояниях. В активном состоянии возможен доступ как к метаданным, так и к содержимому секрета (парам ключ-значение). В деактивированном состоянии возможен доступ только к метаданным, содержимое секрета недоступно.

## Тип секрета {#secret-type}

{{ lockbox-full-name }} позволяет создавать секреты двух типов: генерируемые и пользовательские.

* _Генерируемый секрет_ — последовательность случайных символов, которая формируется автоматически. Вы можете настроить параметры генерации, такие как длина и состав символов. Генерируемые секреты подходят для паролей, которые не требуется задавать вручную, а также паролей с частой ротацией. Например, для доступа к базам данных, аутентификации на уровне микросервисов, в системах CI/CD и для других программных взаимодействий.

    Также генерируемые секреты используются для хранения информации о подключениях к базам данных {{ PG }}, {{ MY }} и {{ CH }} с помощью [{{ connection-manager-full-name }}](../../metadata-hub/concepts/connection-manager.md). При этом секрет создается в {{ connection-manager-full-name }}, а хранится в {{ lockbox-full-name }}.

* _Пользовательский секрет_ создается вручную. Подходит для секретов, которые генерируются в сторонней системе. В качестве конфиденциального значения для пользовательского секрета можно указать не только строку, но и файл.

## Версия {#version}

В {{ lockbox-full-name }} секреты хранятся в виде версий. Каждая версия содержит метаданные и одну или больше пар ключ-значение, что позволяет отслеживать изменения и управлять жизненным циклом секрета.

Версию нельзя изменить после создания. Для любого изменения пар ключей-значений необходимо [создать новую версию](../operations/secret-version-manage#create-version). Помимо создания новой версии секрета, можно создать версию [на основе уже существующей](../operations/secret-version-manage#create-version-based-on-other) с новыми значениями.

Единовременно может быть активна только одна версия секрета. Вы можете управлять активной версией секрета, добавляя новые версии или [откатываясь к предыдущим](../operations/secret-version-manage#backup).

К версиям секрета можно настроить доступ дополнительно к доступу к самому секрету. Для этого нужно назначить роль `{{ roles-lockbox-admin }}` или `{{ roles-lockbox-payloadviewer }}`. Подробнее об управлении доступом читайте в разделе [Управление доступом {{ lockbox-full-name }} - Какие роли мне необходимы](../security/index.md#choosing-roles).

## Шифрование секретов с помощью {{ kms-full-name }} {#encryption}

С помощью [{{ kms-full-name }}](../../kms/index.yaml) можно создавать и управлять ключами шифрования, которые используются для защиты секретов в {{ lockbox-full-name }}.

Все секреты по умолчанию зашифрованы общим ключом. Однако, при [создании секрета](../operations/secret-create.md) можно указать собственный [ключ](../../kms/concepts/key.md) {{ kms-full-name }} для шифрования секрета. Использование собственного ключа обладает следующими преимуществами:

* Снижаются риски при возможной компрометации общего ключа.
* Собственный ключ можно [ротировать](../../kms/operations/key.md#rotate) самостоятельно и управлять его версиями.
* При необходимости, собственный ключ можно удалить и таким образом гарантированно заблокировать доступ к зашифрованным данным.
* Можно получать аудитные логи событий, связанных с использованием ключа шифрования с помощью сервиса [{{ at-full-name }}](../../audit-trails/concepts/index.md).

{% include [lockbox-and-kms-roles](../../_includes/lockbox/lockbox-and-kms-roles.md) %}

{% note warning %}

Использование ключа {{ kms-full-name }} при каждом обращении к зашифрованному им секрету тарифицируется как одна криптографическая операция. Цены за криптографические операции с ключом указаны в [правилах тарификации {{ kms-full-name }}](../../kms/pricing.md).

{% endnote %}

## Смотрите также

* [{#T}](../security/index.md)
* [{#T}](../tutorials/index.md)
* [{#T}](../pricing.md)
