---
title: Сеть и кластеры БД в {{ mrd-full-name }}
description: Из статьи вы узнаете об основных настройках сетевого интерфейса кластера {{ RD }}.
---

# Сеть и кластеры {{ mrd-short-name }}


При создании кластера вы можете:

* задать сеть для самого кластера;
* задать подсети для каждого из хостов кластера;
* включить поддержку TLS, чтобы подключаться к кластеру извне {{ yandex-cloud }}.


## Имя хоста и FQDN {#hostname}

Имя для каждого хоста в кластере {{ mrd-short-name }} генерирует при его создании. Это имя будет являться доменным именем хоста ([FQDN](../../glossary/fqdn.md)). Имя хоста и, соответственно, FQDN невозможно изменить.

{% include [see-fqdn](../../_includes/mdb/mrd/fqdn-host.md) %}


FQDN можно использовать для подключения к хосту из облачной сети или через интернет.

## Публичный доступ к хостам кластера {#public-access-to-host}

Если кластер {{ mrd-short-name }} создан с поддержкой TLS, подключиться в нему можно как с ВМ {{ yandex-cloud }} в той же облачной сети, так и из интернета.

Если кластер создан без поддержки TLS, подключиться к нему можно только с ВМ {{ yandex-cloud }} в той же облачной сети. Включить публичный доступ к хосту в таком кластере невозможно.

Любой хост в кластере с включенной поддержкой TLS может быть доступен извне {{ yandex-cloud }}, если вы запросили публичный доступ при [создании](../operations/hosts.md#add) или [изменении](../operations/hosts.md#update) хоста.

Изменить публичный IP-адрес после создания хоста невозможно, но вы можете заменить какой-либо из имеющихся хостов на новый хост с публичным IP-адресом.

При удалении хоста с публичным доступом соответствующий ему IP-адрес отзывается.

## Использование FQDN вместо IP-адресов {#fqdn-ip-setting}

{{ RD }} оперирует IP-адресами хостов, а не их [FQDN](#hostname). Если кластер {{ mrd-short-name }} создан с поддержкой TLS, то такое поведение препятствует подключению к хостам {{ RD }} в следующих ситуациях:

* [Клиент {{ RD }}](./supported-clients.md) подключается к хосту по SSL и требует проверки соответствия FQDN хоста и сертификата.

    Сертификат содержит FQDN хоста, а не его IP-адрес, поэтому такая проверка завершится неудачей.

* Для хоста включен публичный доступ.

    {{ RD }} возвращает внутренний IP-адрес хоста, даже если для хоста включен публичный доступ. Такой IP-адрес недоступен из интернета.

Включите настройку, разрешающую использование FQDN вместо IP-адресов, чтобы IP-адрес хоста подменялся на его FQDN. Эту настройку можно включить при [создании](../operations/cluster-create.md) или [изменении](../operations/update.md#configure-fqdn-ip-behavior) любого кластера {{ mrd-short-name }}, но обычно она используется в кластере с включенной поддержкой TLS для обхода упомянутых выше ограничений.

{% include [fqdn-option-compatibility-note](../../_includes/mdb/mrd/connect/fqdn-option-compatibility-note.md) %}

> **Пример действия опции**
>
> В нешардированных кластерах {{ mrd-short-name }} часто используется Sentinel, который позволяет получить адрес хоста-мастера {{ RD }}. Поскольку Sentinel получает адрес от самого {{ RD }}, то, в зависимости от того, включена ли опция **{{ ui-key.yacloud.redis.field_announce-hostnames }}**, результат будет разный.
>
> Пусть в кластере есть хост-мастер {{ RD }} с FQDN `rc1a-abcd********5678.mdb.yandexcloud.net` и внутренним IP-адресом `10.0.0.222`. Тогда Sentinel вернет адрес хоста следующего вида:
>
> * С выключенной опцией: `10.0.0.222:6379`.
> * С включенной опцией: `rc1a-abcd********5678.mdb.yandexcloud.net:6379`.

## Группы безопасности {#security-groups}

{% include [sg-rules-limits](../../_includes/mdb/sg-rules-limits.md) %}

{% note tip %}

При подключении к кластеру из той же облачной сети, в которой он находится, не забудьте [настроить группы безопасности](../operations/connect/index.md#configuring-security-groups) не только для кластера, но и для хоста, с которого выполняется подключение.

{% endnote %}

{% include [sg-rules-concept](../../_includes/mdb/sg-rules-concept.md) %}

