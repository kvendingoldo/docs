# Инструменты управления, мониторинга и биллинга

Платформа {{ yandex-cloud }} является готовым полнофункциональным облачным сервисом «из коробки». Она обладает более широкими возможностями управления, мониторинга и биллинга, чем решение VMware.

VMware Cloud Director и {{ yandex-cloud }} поддерживают популярные инструменты Infrastructure as Code (IaC): Terraform и CrossPlane. Основным отличием здесь является использование синхронного API в VMware Cloud Director и асинхронного API в {{ yandex-cloud }}.

Для мониторинга и биллинга в VMware необходимы дополнительные инструменты. Пользователи {{ yandex-cloud }} получают готовые сервисы сбора, хранения и отображения метрик виртуализации, а также измерения потребления ресурсов по модели pay-as-you-go или постоплатной модели.

## Инструменты управления по модели «Инфраструктура как код» (IaC) {#iac}

#|
|| **VMware Cloud Director** | **{{ yandex-cloud }}** ||
|| CrossPlane в инфраструктуре VMware работает поверх VMware Tanzu Application Platform — контейнерной оркестрации поверх ESXi.

В VMware Cloud Director синхронное API, поэтому задача распараллеливания процессов, равно как и многопоточность через PowerShell Runspaces, значительно усложняется. Например, можно в несколько потоков запустить создание виртуальной машины в vApp с ключом Async, однако ВМ будут созданы строго последовательно в пределах одной организации. 
| {{ yandex-cloud }} использует [асинхронное API](../../../api-design-guide/concepts/async.md), что позволяет распараллеливать развертывание, не дожидаясь завершения операции с текущим объектом. ||
|#

## Подсистема биллинга {#billing}

#|
|| **VMware Cloud Director** | **{{ yandex-cloud }}** ||
|| На платформе VMware отсутствуют встроенные решения по биллингу — каждый облачный провайдер или пользователь виртуализации выбирает стороннее решение для реализации данного функционала. 
| Биллинг в {{ yandex-cloud }} позволяет измерять потребление ресурсов по моделям pay-as-you-go и постоплатной. Детализация биллинга может быть просмотрена непосредственно в консоли облака, а также выгружена во внешние системы для анализа.

С помощью функции [«бюджеты»](../../../billing/concepts/budget.md) вы можете контролировать потребление ресурсов на платформе. Бюджеты позволяют установить сумму расходов за месяц, а при достижении порога потребления направляют уведомления указанным в настройках пользователям, которые зарегистрированы в облаке. ||
|#

## Подсистема мониторинга {#monitoring}

### Мониторинг в VMware {#vmware-monitoring}

Мониторинг на платформе VMware представлен как встроенными метриками виртуальных машин, так и инструментом vRealize, который дополнительно включает APM (Application Performance Monitoring) и возможности аналитики и рекомендаций по оптимизации инфраструктуры.

### Мониторинг в {{ yandex-cloud }} {#yc-monitoring}

Мониторинг является неотъемлемой частью платформы облака и позволяет собирать, хранить и отображать метрики, а также настраивать алерты и присылать уведомления по ним.

{{ monitoring-full-name }} собирает метрики ваших облачных ресурсов автоматически и строит по ним графики и дашборды. Для сервисов платформы автоматически формируются сервисные дашборды с наиболее популярными метриками.

Сервис поддерживает интеграционный слой с системой Prometheus (протоколы RemoteRead, RemoteWrite) — возможность подключения Grafana для визуализации метрик. В сервис можно загружать метрики из приложений, установленных в {{ yandex-cloud }}, или использовать свои локальные источники данных.

Для сбора, анализа и хранения логов используется подсистема логирования {{ cloud-logging-name }}, которая агрегирует данные о работе различных ресурсов в лог-группу. Данные для каждой лог-группы хранятся изолированно, распределение доступа осуществляется за счет сервиса {{ iam-name }} (IAM). Реализована возможность выгружать и хранить логи {{ objstorage-name }}. Логи из {{ cloud-logging-name }} могут быть добавлены на один дашборд c диагностической информацией из других систем, интегрированных с Grafana с помощью плагина для Grafana.

Архитектурно {{ cloud-logging-name }} и {{ monitoring-name }} построены поверх системной базы YDB, которая находится «под капотом» большинства сервисов {{ yandex-cloud }}. А данные автоматически реплицируют в несколько зон доступности, обеспечивая надежное хранение логов и метрик даже при выходе из строя стойки или всего дата-центра.