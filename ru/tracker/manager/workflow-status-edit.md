# Статусы задач

Статус — это атрибут задачи, который обозначает, на каком этапе находится ее выполнение. Например: «{{ ui-key.startrek-backend.applinks.samsara.status.open }}», «{{ ui-key.startrek-backend.applinks.samsara.status.in.progress }}», «{{ ui-key.startrek-backend.presets.developmentPreset.board.column.testing }}», «{{ ui-key.startrek-backend.applinks.samsara.status.closed }}».

В рамках [рабочего процесса](./add-workflow.md) для каждого [типа задач](./add-ticket-type.md) в очереди можно определить свой набор статусов и [переходов](./workflow-action-edit.md) между ними. Редактировать статусы в рабочих процессах очереди может владелец очереди и пользователи, которым он выдал [доступ к настройкам очереди](queue-access.md).

В {{ tracker-name }} есть системные статусы — их список доступен в [настройках {{ tracker-name }}]({{ link-tracker-statuses }}). Эти статусы можно использовать в любых рабочих процессах. Если среди системных статусов не нашлось подходящих, [администратор](../role-model.md) {{ tracker-name }} может создать новые. Они появятся в общем списке статусов, и пользователи смогут использовать их в своих рабочих процессах.

## Настройки статусов в редакторе рабочих процессов {#status-settings}

В визуальном редакторе рабочих процессов можно настраивать статусы в рамках рабочего процесса. Чтобы открыть редактор рабочих процессов:

1. Перейдите на страницу очереди.

1. В верхнем правом углу нажмите ![](../../_assets/tracker/svg/settings-old.svg) **{{ ui-key.startrek.ui_components_PageQueue_header.settings }}**.

1. Перейдите на вкладку **{{ ui-key.startrek.ui_components_page-queue-admin_QueueAdminPageContent.menu-item-workflows }}** и нажмите на название рабочего процесса, статусы которого вы хотите редактировать.

Откроется визуальный редактор рабочих процессов. Здесь можно редактировать уже добавленные статусы — для этого достаточно нажать на статус на схеме, и откроется страница с его настройками. Кроме того, на схему можно [добавлять новые статусы](#add-status).

### Начало рабочего процесса {#initial-status}

Начало рабочего процесса — статус, в котором находится только что созданная задача. В визуальном редакторе рабочих процессов статус, который является началом рабочего процесса, отмечен флажком.

Чтобы сделать статус началом рабочего процесса, нажмите на нужный статус на схеме — откроется окно с настройками этого статуса. В правом верхнем углу окна с настройками нажмите на ![](../../_assets/tracker/initial-ststus-icon.png).

{% note warning %}

В рабочем процессе обязательно должен быть один статус, который является началом рабочего процесса. Началом рабочего процесса может быть статус любого типа.

{% endnote %}

### Типы статусов {#status-types}

В рамках рабочего процесса для статуса можно определить тип. Все статусы одного типа окрашиваются в определенный цвет:
* ![](../../_assets/tracker/svg/initial.svg) — задачу создали и еще не взяли в работу.
* ![](../../_assets/tracker/svg/progress.svg) — задачу взяли в работу.
* ![](../../_assets/tracker/svg/pause.svg) — работу над задачей приостановили.
* ![](../../_assets/tracker/svg/end.svg) — задачу выполнили и закрыли.
* ![](../../_assets/tracker/svg/cancel.svg) — задачу не выполнили и закрыли.

Задачи со статусами типа «Завершен» и «Отменен» считаются закрытыми: у таких задач в очереди ключ отображается зачеркнутым.

### Смена статуса при комментарии {#change-with-comment}

Настройка **Смена статуса при комментарии** позволяет изменить статус после добавления в задачу комментария. Такая настройка пригодится в линейных процессах, например, для службы поддержки.

1. Откройте настройки того статуса, из которого должен осуществиться переход при появлении в задаче комментария, и нажмите **Смена статуса при комментарии**.

1. Выберите из списка, в какой статус должен выполниться переход после добавления комментария. В списке содержатся переходы для настраиваемого статуса, которые уже добавлены на схему рабочего процесса. Пример переходов в списке:
   * В предыдущий статус — задача будет переведена в предшествующий статус;
   * Переход «Закрыть» — задача будет переведена в статус типа «Завершен»;
   * Переход «Нужна информация» — задача будет переведена в статус типа «На паузе»;
   * Переход «Переоткрыть» — задача будет переведена в статус типа «Начальный».

1. При необходимости включите опции **Назначить исполнителя из предыдущего статуса** и **Только если комментарий оставил исполнитель**.

1. Нажмите кнопку **Сохранить**.

### Переходы между статусами {#add-action}

Для корректной работы рабочего процесса между статусами обязательно должны быть настроены [переходы](./workflow-action-edit.md).

Чтобы настроить переход для статуса:

1. Откройте настройки статуса и в разделе **Переходы** нажмите **Добавить**.
   Поле **Исходный статус** будет заполнено названием статуса, из которого настраивается переход, а поле **Новый статус** нужно заполнить и выбрать статус из списка. В списке предложены статусы, которые уже были добавлены на схему рабочего процесса.

1. **Название** — это поле для названия кнопки в интерфейсе {{ tracker-name }}, которая будет переводить задачу в этот статус. Это же название будет использоваться для обозначения перехода в редакторе. По умолчанию название совпадает с новым статусом в переходе, но вы можете скорректировать его. **Название на английском** заполняется автоматически.

1. Выберите рабочий процесс и нажмите кнопку ![](../../_assets/tracker/button-edit.png).

1. Выберите исходный статус на панели **Статусы и переходы**.

1. Перейдите на вкладку **Добавить переход**.

1. Для перехода можно настроить:
   * [автоматизацию](./workflow-action-edit.md#automatization) — автоматические действия, которые должны выполняться при переходе.
   * [условия перехода](./workflow-action-edit.md#conditions) — условия, при которых переход будет доступен.
   * [экран перехода](./workflow-action-edit.md#screen) — всплывающее окно, в котором пользователь обязательно должен будет заполнить поля, чтобы изменить параметры задачи.

Для удобства работы есть специальный тип переходов — **Разрешить переходы из любого статуса**. Например, если требуется добавить в рабочий процесс статус, который достижим из любого другого статуса, вам не придется вручную настраивать эти переходы для каждого статуса на схеме. Достаточно включить опцию **Разрешить переходы из любого статуса** — на схеме для этого статуса будет изображен метапереход. 

### Копирование переходов {#copy-transitions}

Вы можете использовать переходы одного статуса для других статусов. Для этого:

1. В настройках статуса нажмите ![](../../_assets/tracker/svg/actions.svg).
1. Нажмите ![](../../_assets/tracker/svg/copy-transition.svg) **Скопировать переходы в другой статус** или ![](../../_assets/tracker/svg/paste-transition.svg) **Вставить переходы из другого статуса**.
1. Выберите из списка статус для вставки или копирования переходов.

## Создать статус {#create-status}

{% note warning %}

Создавать новые статусы задач может только [администратор](../role-model.md). Созданный статус нельзя удалить или отредактировать.

{% endnote %}

Чтобы создать новый статус:

1. Убедитесь, что вы авторизованы в {{ tracker-full-name }} как [администратор](../role-model.md).

1. На панели слева выберите ![](../../_assets/tracker/svg/admin.svg) **Администрирование** → **Статусы задач**.

1. Нажмите кнопку **Создать статус**.

1. Заполните поля:
   * **Название** — укажите название статуса на русском.
   * **Название на английском** — будет сформировано автоматически из названия на русском.
   * **Ключ** — будет сгенерирован автоматически из названия на русском.

1. Нажмите **Создать**.

Также создать новый статус можно на странице рабочих процессов. Новый статус будет сразу же добавлен в рабочий процесс текущей очереди, но использовать его можно будет и в других очередях.

1. Перейдите на страницу очереди.

1. В верхнем правом углу нажмите ![](../../_assets/tracker/svg/settings-old.svg) **{{ ui-key.startrek.ui_components_PageQueue_header.settings }}**.

1. Перейдите на вкладку **{{ ui-key.startrek.ui_components_page-queue-admin_QueueAdminPageContent.menu-item-workflows }}**. Здесь вы увидите список рабочих процессов в очереди. Выберите рабочий процесс, в который хотите добавить новый статус, и нажмите на его название. Откроется визуальный редактор рабочих процессов.

1. На верхней панели визуального редактора процессов нажмите **Добавить статус**. Начните вводить название нового статуса и нажмите на кнопку создания.

1. Заполните поля:
   * **Название** — укажите название статуса на русском.
   * **Название на английском** — будет сформировано автоматически из названия на русском.
   * **Ключ** — будет сгенерирован автоматически из названия на русском.

1. Выберите из списка подходящий для статуса тип.

1. Нажмите **Создать**.

## Добавить статус в рабочий процесс {#add-status}

Чтобы добавить статус в рабочий процесс:

1. Перейдите на страницу очереди.

1. В верхнем правом углу нажмите ![](../../_assets/tracker/svg/settings-old.svg) **{{ ui-key.startrek.ui_components_PageQueue_header.settings }}**.

1. Перейдите на вкладку **{{ ui-key.startrek.ui_components_page-queue-admin_QueueAdminPageContent.menu-item-workflows }}** и нажмите на название рабочего процесса. Откроется визуальный редактор рабочих процессов.

1. На верхней панели визуального редактора процессов нажмите **Добавить статус**. Начните вводить название нового статуса и нажмите на кнопку создания.

1. Из предложенного списка статусов выберите тот, который хотите добавить в процесс.


   По умолчанию в {{ tracker-name }} доступны наиболее популярные статусы. Если нужного вам статуса среди них нет, администратор может [создать его](#create-status).


1. Настройте статус. Вы можете:
   * сделать его [началом рабочего процесса](#initial-status);
   * выбрать [тип статуса](#status-types);
   * настроить [смену статуса при комментарии](#change-with-comment);
   * настроить [переходы](#add-action).

## Удалить статус из рабочего процесса {#remove-status}

При удалении статуса будут удалены все связанные с ним переходы. Если вы удаляете статус — начало рабочего процесса, на схеме возникнут ошибки, потому что рабочий процесс не может быть без начала.

Чтобы удалить статус из рабочего процесса:

1. На странице очереди в верхнем правом углу нажмите ![](../../_assets/tracker/svg/settings-old.svg) **{{ ui-key.startrek.ui_components_PageQueue_header.settings }}**.

1. Перейдите на вкладку **{{ ui-key.startrek.ui_components_page-queue-admin_QueueAdminPageContent.menu-item-workflows }}**. Откройте в редакторе рабочий процесс, из которого хотите удалить статус.

1. Нажмите на удаляемый статус и нажмите на клавиатуре **Delete** или перейдите в настройки статуса и нажмите ![](../../_assets/tracker/svg/actions.svg) → **Убрать из процесса**.
