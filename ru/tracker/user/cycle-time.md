# Время цикла

В {{ tracker-full-name }} _цикл_ — последовательность этапов решения задачи в течение заданного периода времени. Каждому этапу соответствует присвоенный статус.

Виджет «Время цикла» объединяет два представления данных о работе с циклом:

* _Диаграмма «Время цикла»_ позволяет проанализировать время рабочего процесса. На диаграмме отражается суммарное время всех этапов задачи от первого прохождения начального статуса до последнего прохождения конечного статуса.

* _Контрольная диаграмма_ позволяет отслеживать отклонения от скользящего среднего времени цикла, рассчитанного по выборке задач в рамках заданного периода.

Виджет объединяет обе диаграммы и отображает:

* задачи, которые отклоняются от времени цикла;
* динамику изменения времени цикла на выбранном перцентиле и скользящем среднем;
* изменение полосы отклонения задач от среднего времени цикла.

Чтобы настроить виджет, задайте параметры:

* **Название** — название, которое отображается в заголовке виджета.
* **Источник задач** — фильтр, на основе которого формируется список задач. Вы можете выбрать [системный](default-filters.md) или [созданный ранее](create-filter.md) фильтр из списка или задать фильтр с помощью [языка запросов](query-filter.md) или параметров.
* **Начальные статусы** — статусы, в которых работа над задачей началась.
* **Конечные статусы** — статусы, в которых задача считается завершенной.
* **Исключить статусы** — статусы, время нахождения в которых необходимо убрать из расчетов.
* **Автоматическое обновление** — опция, которая автоматически перестраивает диаграммы виджета. Периодичность обновления определяется параметром **Шаг**.
* **Период** — период для построения диаграммы. Чтобы при обновлении виджета период построения диаграммы рассчитывался от текущей даты, настройте динамический диапазон дат: на вкладке **Основные** или **Другие** выберите диапазон.

   {% note tip %}

   Вы также можете настраивать период сразу на графике: для этого в правом верхнем углу виджета нажмите на значок ![](../../_assets/tracker/svg/calendar.svg) и укажите диапазон.

   {% endnote %}
* **Шаг** — величина шага на оси с периодом. За шаг можно принимать дни, недели, месяцы или спринты.
* **График работы** — период рабочего времени в течение суток. Позволяет убрать из расчета времени цикла нерабочее время, выходные и праздники.
* **Перцентиль** — процент значений в выборке данных, относительно которого вычисляется перцентиль.
* **Показать цель** — опция, которая добавляет на график линию цели. Цель — это количество дней, которое планирует тратить команда на выполнение задач.
* **Скользящее среднее** — опция, которая добавляет на график линию усредненного значения времени. С ее помощью можно увидеть, как задача проходит цикл по медиане. График сглаживается для лучшей визуализации, поэтому он не будет соответствовать графику перцентиля со значением 50%.
* **Стандартное отклонение** — опция, которая добавляет на график полосу среднеквадратичного отклонения. С ее помощью вы можете оценить, насколько широко значения рассеяны от среднего значения. Чем меньше ширина полосы [стандартного отклонения](https://www.youtube.com/watch?v=-YnNEy0odrY), тем стабильнее работает команда.
* **Отображение задач** — опция, которая позволяет отображать на графике задачи и ссылки на них для быстрого перехода.

## Отображение данных {#view}

Выборка задач, которые использовались для построения графика, собрана с учетом прав доступа пользователя. Если виджет открывает другой пользователь, он не увидит задачи, к которым у него нет доступа. Такие задачи будут скрыты символами `***`.

Вы можете настроить отображение данных на графике: 

* Чтобы увеличить область графика, выделите ее.

* Чтобы зафиксировать подсказку со списком задач, нажмите на точку на графике. Из подсказки можно открыть вкладку с преднастроенным фильтром задач для дальнейшего поиска системных проблем процесса.

* Изменять представление данных можно переключением пунктов легенды под графиком с помощью клавиши **Ctrl** на Windows и **Command** на macOS.

* Для оценки актуальности данных на виджете отображается время последнего обновления. Чтобы показать точную дату, время и имя инициатора построения выборки, наведите указатель на значок ![](../../_assets/tracker/svg/clear-filter.svg).

## Анализ данных {#analysys}

На слое задач задачи раскладываются на виджете по осям Х и Y, где ось X — шаг, ось Y — время цикла.

Для подготовки cлоя задач {{ tracker-name }} собирает данные:

1. По фильтру в настройках виджета подбирается набор задач.

1. Задачи раскладываются по интервалам.

1. Для каждой задачи вычисляется время цикла с учетом исключенных статусов и графика работы.

1. Задачи одного шага упорядочиваются по возрастанию времени цикла.

1. Полученные значения отображаются в виде точек.

1. Расположенные рядом задачи собираются в кластер для экономии пространства (более объемная точка на графике). 

Вы можете открыть список задач, которые образуют линию на графике в любой ее точке. Для этого нажмите на точку на линии и в подсказке выберите параметр для построения фильтра. Фильтр откроется в новой вкладке.

{% note info %}

При первом построении или обновлении диаграммы сбор данных может занимать длительное время.

{% endnote %}

### Исследовать время прохождения статуса {#status-time}

Нахождение тикета в разных статусах (например, в тестировании или в код-ревью) занимает определенное время. Некоторые этапы работы привносят больший вклад в общее время цикла тикета и нуждаются в оптимизации.

Чтобы выявить, в каких статусах задерживается задача, используйте отображение прохождения времени цикла по слоям. Для этого выберите вкладку **По статусам**.

* Каждый слой состоит из времени прохождения этого статуса задачами на выбранном перцентиле.

* Чтобы построить график времени цикла по статусу, выберите точку на слое и нажмите на статус в подсказке.

### Использовать счетчики и мультиперцентиль {#counters}

Чтобы сравнить время цикла задач по разными перцентилям на одном графике, в настройках виджета в разделе **Параметры графика** откройте **Перцентиль** и выберите несколько значений. Такой график поможет понять, насколько выбросы сотого перцентиля выше медианы — линии пятидесятого перцентиля.

Для отображения счетчиков нажмите на значок ![](../../_assets/tracker/svg/info.svg) в правом верхнем углу виджета. На графике доступны счетчики:
* Процентное соотношение задач, которые по времени цикла находятся ниже уровня, заданного целью в настройках виджета.
* Среднее арифметическое значение времени цикла для всех задач выборки.
* Среднее арифметическое значение времени цикла для задач по каждому выбранному перцентилю.

Длина линии под названием счетчика отображает его относительную величину.
