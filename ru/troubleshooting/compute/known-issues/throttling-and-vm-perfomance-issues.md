# Устранение проблем с производительностью дискового и сетевого ввода-вывода на виртуальной машине


## Описание проблемы {#issue-description}

* Сервисы на виртуальной машине работают крайне медленно, несмотря на низкие значения `Load Average` и низкий уровень загрузки CPU;
* На графиках мониторинга виртуальной машины наблюдается рост количества отложенных дисковых операций.

## Решение {#issue-resolution}

Если в заданный промежуток времени работа дисковой подсистемы ВМ не укладывается в лимиты сервиса, срабатывает [троттлинг](../../../compute/concepts/storage-read-write.md#throttling), в результате которого и происходит снижение производительности сервисов внутри виртуальной машины.

Проверьте данные мониторинга внутри ВМ на предмет большого числа отложенных дисковых операций и достижения [лимитов на запись](../../../compute/concepts/limits.md#limits-disks). Для анализа показателей дисковой подсистемы вы можете воспользоваться утилитой iotop для виртуальных машин с Linux или Sysinternals DiskMon для виртуальных машин с Microsoft Windows®.

В {{ yandex-cloud }} производительность диска ВМ напрямую зависит от его объема:

* Если значения IOWait достигают десятков процентов под нагрузкой на протяжении длительного времени, увеличьте объем диска до следующего порога [блока размещения](../../../compute/concepts/storage-read-write.md);
* Если это не поможет, измените тип накопителя на SSD. С каждым шагом 32 ГБ увеличивается количество блоков размещения и повышается быстродействие дисковой подсистемы.

{% note warning %}

Выбрать тип накопителя возможно только при создании ВМ. 

Вы можете [сделать снимок диска](../../../compute/operations/disk-control/create-snapshot.md), после чего [создать новую ВМ из данного снимка](../../../compute/operations/vm-create/create-from-snapshots.md) с `network-ssd`.

{% endnote %}