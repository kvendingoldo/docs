# Мониторинг сетевых соединений

Для обеспечения работы [сетевого балансировщика](../../network-load-balancer) и [групп безопасности](./security-groups.md) {{ vpc-short-name }} использует мониторинг сетевых соединений.

Под сетевым соединением подразумевается поток сетевого трафика ([Traffic flow](https://en.wikipedia.org/wiki/Traffic_flow_%28computer_networking%29)) в любом направлении. Соединение однозначно определяется пятью параметрами: IP-адресом источника, портом источника, IP-адресом приемника, портом приемника и протоколом сетевого взаимодействия. Порядок приемника и источника не учитывается.

При использовании групп безопасности соединение создается, если первый пакет получен в направлении с разрешающим правилом.

Жизненный цикл сетевого соединения заканчивается в следующих случаях:

{% include [conditions-for-deleting-records](../../_includes/vpc/conditions-for-deleting-records.md) %}

В связи с этим, для ОС виртуальной машины и для ваших приложений рекомендуется устанавливать параметр `keepalive` на время меньше трех минут.

> Например, для ОС на базе Linux рекомендуются следующие настройки системных параметров `sysctl`:
>
> * net.ipv4.tcp_keepalive_time = 120
> * net.ipv4.tcp_keepalive_intvl = 60
> * net.ipv4.tcp_keepalive_probes = 4

Ограничение на количество соединений — 350 000 при использовании групп безопасности. Обратите внимание, что ограничение действует только если ВМ назначена группа безопасности, созданная пользователем. При достижении этого ограничения новые соединения отбрасываются. Ограничение действует для отдельного сетевого интерфейса виртуальной машины.

Подробнее о [просмотре графика подключений](../operations/connections-view.md).
